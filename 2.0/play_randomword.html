<!DOCTYPE html>
<html>
<head>
   <title>Cows & Bulls</title>
   	<meta name="viewport" content="width=device-width, initial-scale=1">
   	<link rel="stylesheet" href="js/jquery.mobile-1.3.2.min.css">
	<script src="js/jquery-1.8.3.min.js"></script>
	<script src="js/jquery.mobile-1.3.2.min.js"></script>
	<script src="js/wordizy_common.js"></script>
</head>
<body>

<div data-role="page" id="pageone">

	<div data-role="header" data-position="fixed">
		<h1>Wordizy</h1>
	</div><!-- /header -->

	<div data-role="content" id="content_id" align="center">
			<div id="hint_content_div" align="center" style='overflow:auto;height:100px'>
			</div>
			<div id="button_groups">
				<div id="randomword_placeholder" data-role="controlgroup" data-type="horizontal"></div>

				<div data-role="controlgroup" data-type="horizontal" data-mini="true">
					<input type = "button" id="delete_characters" data-icon="delete" data-iconpos="notext">
					<input type = "button" id="display_hint" data-icon="info" data-iconpos="notext">
					<input type = "button" id="reveal_chracters" data-icon="star" data-iconpos="notext">
					<input type = "button" id="back_chracters" data-icon="back" data-iconpos="notext">
				</div>

				<div id="key_board1" data-role="controlgroup" data-type="horizontal">
						  <input type = "button" id="key_1" data-mini="true" value= "#">
						  <input type = "button" id="key_2" data-mini="true" value= "#">
						  <input type = "button" id="key_3" data-mini="true" value= "#">
						  <input type = "button" id="key_4" data-mini="true" value= "#">
						  <input type = "button" id="key_5" data-mini="true" value= "#">
						  <input type = "button" id="key_6" data-mini="true" value= "#">
				</div>
				<div id="key_board2" data-role="controlgroup" data-type="horizontal">
						  <input type = "button" id="key_7" data-mini="true" value= "#">
						  <input type = "button" id="key_8" data-mini="true" value= "#">
						  <input type = "button" id="key_9" data-mini="true" value= "#">
						  <input type = "button" id="key_10" data-mini="true" value= "#">
						  <input type = "button" id="key_11" data-mini="true" value= "#">
						  <input type = "button" id="key_12" data-mini="true" value= "#">
				</div>
	  		</div>
    </div><!-- /content -->

		<div data-role="footer" data-position="fixed">
			<h4>Wordizy</h4>
		</div><!-- /footer -->
</div><!-- /page -->

    <script>
		var random_number = getRandomNum(1, true);
		while(random_number < 3)
		{
			random_number = getRandomNum(1, true);
		}
		var random_word_object = new Object();
		getRandomWordRawData(random_number,random_number);
		getContainerHTML(random_number, "randomword_placeholder");

        function setRandomWord(aWord) {
            if (typeof (Storage) !== "undefined") {
                    sessionStorage.random_word = aWord;
                }
            else {
                alert("Browser doesn't support session data ! Crome recomended");
            }
        }

		$(document).on("pageshow","#pageone",function(event){

			var heightOfWindow = $(window).height();
			var totalHeightOfButtons = $("#button_groups").height();
			var leftForHint = heightOfWindow - totalHeightOfButtons;
			$('#hint_content_div').height(leftForHint / 2);

		   $("#display_hint").click(function(event) {

				/*var element = document.getElementById("randomword");
				if(element)
				{
					element.innerHTML = random_word_object.word;
				}*/
				random_word_object.meaning.toHTML("hint_content_div");

				//$( "#level_list" ).refresh();
		   		//$( "#hint_panel" ).panel("open");
		   	});
		});

		function getRandomWordRawData(minLength, maxLength)
		{
			var minMaxString = "&minLength=" + minLength + "&maxLength=" + maxLength;
			var queryString = "randomWord?hasDictionaryDef=true&minCorpusCount=0&maxCorpusCount=-1&minDictionaryCount=1&maxDictionaryCount=-1" + minMaxString;
			var requestURLString = BASE_API_URL + "words.json/" + queryString + API_KEY;

			$.getJSON(requestURLString,
						function(data){
							var random_word = formatRandomWord(data);
							random_word_object.word = random_word;
							random_word_object.word_size = random_word.length;
							getWordDefinition(random_word);
			});
		}

		function getWordDefinition(inputWord)
		{
			var queryString = inputWord + "/definitions?limit=5&includeRelated=false&sourceDictionaries=all&useCanonical=false&includeTags=false";
			var requestURLString = BASE_API_URL + "word.json/" + queryString + API_KEY;

			$.getJSON(requestURLString,
						function(data){
					var wordDefinition = formatWordMeaning(data);
					random_word_object.meaning = wordDefinition;
				});
		}

    </script>
</body>
</html>
